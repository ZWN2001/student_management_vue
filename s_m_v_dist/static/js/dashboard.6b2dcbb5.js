(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"0471":function(t,e,s){},"0770":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-card",{staticClass:"mgb20",staticStyle:{height:"302px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"user-info"},[a("img",{staticClass:"user-avator",attrs:{src:s("7159"),alt:""}}),a("div",{staticClass:"user-info-cont"},[a("div",{staticClass:"user-info-name"},[t._v(t._s(t.myInfo.name))]),a("div",{staticStyle:{"padding-top":"12px"}},[t._v(t._s(t.role))])])]),a("div",{staticClass:"user-info-list"},[t._v("\n                    上次登录时间：\n                    "),a("span",[t._v(t._s(t.lastLoginTime))])]),a("div",{staticClass:"user-info-list"},[t._v("\n                    上次登录地点：\n                    "),a("span",[t._v("济南")])]),a("div",{staticClass:"user-info-list"},[a("el-button",{staticStyle:{"padding-top":"12px"},attrs:{type:"text"},on:{click:t.handleHistory}},[t._v("查看登录历史")])],1)])],1),a("el-card",{staticStyle:{height:"403px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("待办事项")]),a("el-button",{staticStyle:{float:"right",padding:"3px"},attrs:{type:"text"}},[t._v("添加")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{"show-header":!1,data:t.todoList}},[a("el-table-column",{attrs:{width:"40"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{model:{value:e.row.status,callback:function(s){t.$set(e.row,"status",s)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"todo-item",class:{"todo-item-del":e.row.status}},[t._v(t._s(e.row.title))])]}}])}),a("el-table-column",{attrs:{width:"60"}},[[a("i",{staticClass:"el-icon-edit"}),a("i",{staticClass:"el-icon-delete"})]],2)],1)],1)],1),a("el-dialog",{attrs:{title:"登录历史(仅显示近七次）",visible:t.historyVisible,width:"30%"},on:{"update:visible":function(e){t.historyVisible=e}}},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.lastLoginTimes,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"id",label:"序号"}}),a("el-table-column",{attrs:{prop:"lastLoginTime",label:"登录时间"}})],1)],1)],1)},i=[],o=(s("7f7f"),s("365c")),l={name:"dashboard",data:function(){return{identity:localStorage.getItem("identity"),tid:localStorage.getItem("tid"),todoList:[{title:"今天要修复100个bug"},{title:"今天要修复100个bug"},{title:"今天要写100行代码加几个bug吧"},{title:"今天要修复100个bug"},{title:"今天要修复100个bug"},{title:"今天要写100行代码加几个bug吧"}],query:{tid:localStorage.getItem("tid"),pageIndex:1,pageSize:10},myInfo:{name:"",tid:""},editVisible:!1,origin:{},form:{},lastLoginTimes:[],lastLoginTime:"",historyVisible:!1}},components:{},computed:{role:function(){return"老师"}},created:function(){this.getInfoData()},methods:{getInfoData:function(){var t=this;Object(o["i"])(this.query).then((function(e){console.log(e),t.myInfo=e.data[0],localStorage.setItem("teacherName",t.myInfo.name),console.log(localStorage.getItem("teacherName"))})),Object(o["g"])(localStorage.getItem("tid")).then((function(e){t.lastLoginTimes=e.data,t.lastLoginTime=t.lastLoginTimes[t.lastLoginTimes.length-1].lastLoginTime}))},handleHistory:function(){this.historyVisible=!0}}},r=l,n=(s("9e79"),s("2877")),d=Object(n["a"])(r,a,i,!1,null,"5bbf3a35",null);e["default"]=d.exports},"34db":function(t,e,s){"use strict";var a=s("e4bc"),i=s.n(a);i.a},7159:function(t,e,s){t.exports=s.p+"static/img/img.d8ec83b8.jpg"},"9e79":function(t,e,s){"use strict";var a=s("0471"),i=s.n(a);i.a},dd2e:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-card",{staticClass:"mgb20",staticStyle:{height:"302px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"user-info"},[a("img",{staticClass:"user-avator",attrs:{src:s("7159"),alt:""}}),a("div",{staticClass:"user-info-cont"},[a("div",{staticClass:"user-info-name"},[t._v(t._s(t.myInfo.name))]),a("div",{staticStyle:{"padding-top":"12px"}},[t._v(t._s(t.role))]),a("el-button",{staticStyle:{"padding-top":"12px"},attrs:{type:"text",icon:"el-icon-edit"},on:{click:t.handleChangePassword}},[t._v("修改密码")])],1)]),a("div",{staticClass:"user-info-list"},[t._v("\n                    上次登录时间：\n                    "),a("span",[t._v(t._s(t.lastLoginTime))])]),a("div",{staticClass:"user-info-list"},[t._v("\n                    上次登录地点：\n                    "),a("span",[t._v("济南")])]),a("div",{staticClass:"user-info-list"},[a("el-button",{staticStyle:{"padding-top":"12px"},attrs:{type:"text"},on:{click:t.handleHistory}},[t._v("查看登录历史")])],1)]),a("el-card",{staticStyle:{height:"403px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("待办事项")]),a("el-button",{staticStyle:{float:"right",padding:"3px","margin-right":"22px"},attrs:{type:"text"}},[t._v("添加")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{"show-header":!1,data:t.todoList}},[a("el-table-column",{attrs:{width:"40"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{model:{value:e.row.status,callback:function(s){t.$set(e.row,"status",s)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"todo-item",class:{"todo-item-del":e.row.status}},[t._v(t._s(e.row.title))])]}}])}),a("el-table-column",{attrs:{width:"60"}},[[a("i",{staticClass:"el-icon-edit"}),a("i",{staticClass:"el-icon-delete"})]],2)],1)],1)],1),a("el-col",{attrs:{span:16}},[a("el-card",{staticStyle:{height:"652px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("个人信息")]),a("el-button",{staticStyle:{float:"right"},attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(e){return t.handleEdit()}}},[t._v("编辑")])],1),a("el-table-column",[a("div",{staticClass:"infoText"},[t._v("姓名:"),a("span",{staticStyle:{"margin-left":"260px"}},[t._v(t._s(t.myInfo.name))])])]),a("el-divider"),a("el-table-column",[a("div",{staticClass:"infoText"},[t._v("学号:"),a("span",{staticStyle:{"margin-left":"260px"}},[t._v(t._s(t.myInfo.sid))])])]),a("el-divider"),a("el-table-column",[a("div",{staticClass:"infoText"},[t._v("班级:"),a("span",{staticStyle:{"margin-left":"260px"}},[t._v(t._s(t.myInfo.clazz)+"班")])])]),a("el-divider"),a("el-table-column",[a("div",{staticClass:"infoText"},[t._v("邮箱:"),a("span",{staticStyle:{"margin-left":"260px"}},[t._v(t._s(t.myInfo.mail))])])]),a("el-divider"),a("el-table-column",[a("div",{staticClass:"infoText"},[t._v("电话:"),a("span",{staticStyle:{"margin-left":"260px"}},[t._v(t._s(t.myInfo.phone))])])]),a("el-divider"),a("el-table-column",[a("div",{staticClass:"infoText"},[t._v("住址:"),a("span",{staticStyle:{"margin-left":"260px"}},[t._v(t._s(t.myInfo.address))])])]),a("el-divider"),a("el-table-column",[a("div",{staticClass:"infoText"},[t._v("介绍:"),a("span",{staticStyle:{"margin-left":"260px"}},[t._v(t._s(t.myInfo.other))])])])],1)],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:t.editVisible,width:"30%"},on:{"update:visible":function(e){t.editVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"学号"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.form.sid,callback:function(e){t.$set(t.form,"sid",e)},expression:"form.sid"}})],1),a("el-form-item",{attrs:{label:"学生姓名"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"班级"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.form.class,callback:function(e){t.$set(t.form,"class",e)},expression:"form.class"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}})],1),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),a("el-form-item",{attrs:{label:"其他信息"}},[a("el-input",{model:{value:t.form.other,callback:function(e){t.$set(t.form,"other",e)},expression:"form.other"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改密码",visible:t.passwordVisible,width:"40%"},on:{"update:visible":function(e){t.passwordVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"原密码"}},[a("el-input",{attrs:{type:"password"},model:{value:t.passwordForm.oldPassword,callback:function(e){t.$set(t.passwordForm,"oldPassword",e)},expression:"passwordForm.oldPassword"}})],1),a("el-form-item",{attrs:{label:"新密码"}},[a("el-input",{attrs:{type:"password"},model:{value:t.passwordForm.newPassword,callback:function(e){t.$set(t.passwordForm,"newPassword",e)},expression:"passwordForm.newPassword"}})],1),a("el-form-item",{attrs:{label:"确认密码"}},[a("el-input",{attrs:{type:"password"},model:{value:t.passwordForm.confirmPwd,callback:function(e){t.$set(t.passwordForm,"confirmPwd",e)},expression:"passwordForm.confirmPwd"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.passwordVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.savePassword}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"登录历史(仅显示近七次）",visible:t.historyVisible,width:"30%"},on:{"update:visible":function(e){t.historyVisible=e}}},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.lastLoginTimes,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"id",label:"序号"}}),a("el-table-column",{attrs:{prop:"lastLoginTime",label:"登录时间"}})],1)],1)],1)},i=[],o=(s("7f7f"),s("365c")),l={name:"dashboard",data:function(){return{identity:localStorage.getItem("identity"),sid:localStorage.getItem("sid"),todoList:[{title:"今天要修复100个bug"},{title:"今天要修复100个bug"},{title:"今天要写100行代码加几个bug吧"},{title:"今天要修复100个bug"},{title:"今天要修复100个bug"},{title:"今天要写100行代码加几个bug吧"}],query:{sid:localStorage.getItem("sid"),address:"",clazz:"",name:"",other:"",mail:"",phone:"",pageIndex:1,pageSize:10},myInfo:{address:"",clazz:"",name:"",other:"",sid:"",mail:"",phone:""},editVisible:!1,historyVisible:!1,origin:{},form:{address:"",clazz:"",name:"",other:"",sid:"",mail:"",phone:""},passwordForm:{role:"0",id:localStorage.getItem("sid"),oldPassword:"",newPassword:"",confirmPwd:""},passwordVisible:!1,lastLoginTimes:[],lastLoginTime:""}},computed:{role:function(){return"学生"}},created:function(){this.getInfoData()},methods:{getInfoData:function(){var t=this;Object(o["h"])(this.query).then((function(e){console.log(e),t.myInfo=e.data.data[0],localStorage.setItem("clazz",t.myInfo.clazz),localStorage.setItem("studentName",t.myInfo.name)})),Object(o["g"])(localStorage.getItem("sid")).then((function(e){console.log(e.data),t.lastLoginTimes=e.data,t.lastLoginTime=t.lastLoginTimes[t.lastLoginTimes.length-1].lastLoginTime,console.log(e)}))},handleEdit:function(){this.form=this.myInfo,this.origin["sid"]=this.myInfo.sid,this.origin["name"]=this.myInfo.name,this.origin["clazz"]=this.myInfo.clazz,this.origin["mail"]=this.myInfo.mail,this.origin["phone"]=this.myInfo.phone,this.origin["address"]=this.myInfo.address,this.origin["other"]=this.myInfo.other,this.editVisible=!0},saveEdit:function(){this.editVisible=!1;var t={};t["sid"]=this.form["sid"],this.form["name"]!==this.origin["name"]&&(t["name"]=this.form["name"]),this.form["clazz"]!==this.origin["clazz"]&&(t["clazz"]=this.form["clazz"]),this.form["address"]!==this.origin["address"]&&(t["address"]=this.form["address"]),this.form["other"]!==this.origin["other"]&&(t["other"]=this.form["other"]),this.form["mail"]!==this.origin["mail"]&&(t["mail"]=this.form["mail"]),this.form["phone"]!==this.origin["phone"]&&(t["phone"]=this.form["phone"]),t["pageIndex"]=this.query.pageIndex,t["pageSize"]=this.query.pageSize;var e=/^\w{3,}(\.\w+)*@[A-z0-9]+(\.[A-z]{2,5}){1,2}$/;e.test(this.form.mail)?11!==t.phone.length?(this.$message.error("请输入合法手机号"),this.getInfoData()):Object(o["q"])(t).then((function(t){console.log(t)})):(this.$message.error("请输入合法邮箱"),this.getInfoData())},handleChangePassword:function(){this.passwordVisible=!0},savePassword:function(){var t=this;this.passwordForm.newPassword===this.passwordForm.oldPassword?this.$message.warning("您并没有改变密码"):this.passwordForm.newPassword.length<4||this.passwordForm.newPassword.length>12?this.$message.warning("请输入4位以上12位以下的密码"):this.passwordForm.newPassword!==this.passwordForm.confirmPwd?this.$message.warning("两次新密码不一致！"):Object(o["b"])(this.passwordForm).then((function(e){-2===e.data?t.$message.error("原密码不正确"):0===e.data&&(t.$message.success("修改成功"),t.passwordForm.oldPassword="",t.passwordForm.newPassword="",t.passwordForm.confirmPwd="",t.passwordVisible=!1)}))},handleHistory:function(){this.historyVisible=!0}}},r=l,n=(s("34db"),s("2877")),d=Object(n["a"])(r,a,i,!1,null,"260bfb02",null);e["default"]=d.exports},e4bc:function(t,e,s){}}]);