(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"0290":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-wrap"},[s("div",{staticClass:"ms-login"},[s("div",{staticClass:"ms-title"},[e._v("学生管理系统")]),s("el-form",{ref:"login",staticClass:"ms-content",attrs:{model:e.param,rules:e.rules,"label-width":"0px"}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"学号"},model:{value:e.param.id,callback:function(t){e.$set(e.param,"id",t)},expression:"param.id"}},[s("el-button",{attrs:{slot:"prepend",icon:"el-icon-lx-people"},slot:"prepend"})],1)],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm()}},model:{value:e.param.password,callback:function(t){e.$set(e.param,"password",t)},expression:"param.password"}},[s("el-button",{attrs:{slot:"prepend",icon:"el-icon-lx-lock"},slot:"prepend"})],1)],1),s("div",{staticClass:"login-btn"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("登录")])],1),s("el-button",{staticStyle:{"padding-top":"12px"},attrs:{type:"text",icon:"el-icon-edit"},on:{click:e.handleReSetPassword}},[e._v("重置密码")])],1)],1),s("el-dialog",{attrs:{title:"重置密码（仅支持学生，老师请联系管理员）",visible:e.passwordVisible,width:"40%"},on:{"update:visible":function(t){e.passwordVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[s("el-form-item",{attrs:{label:"学号"}},[s("el-input",{model:{value:e.form.sid,callback:function(t){e.$set(e.form,"sid",t)},expression:"form.sid"}})],1),s("el-form-item",{attrs:{label:"邮箱"}},[s("el-input",{attrs:{type:"mail"},model:{value:e.form.mail,callback:function(t){e.$set(e.form,"mail",t)},expression:"form.mail"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.passwordVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.reSetPassword}},[e._v("确 定")])],1)],1)],1)},r=[],o=s("365c"),i={data:function(){return{param:{id:"",password:""},rules:{id:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},form:{},passwordVisible:!1}},methods:{submitForm:function(){var e=this;this.$refs.login.validate((function(t){if(console.log(),!t)return e.$message.error("请输入账号和密码"),console.log("error submit!!"),!1;Object(o["l"])(e.param).then((function(t){console.log(t),0===t.data?(e.$message.success("欢迎同学"),localStorage.setItem("identity","0"),localStorage.setItem("sid",e.param.id),localStorage.setItem("isLogin","0"),e.$router.push("/stuDashboard")):1===t.data?(e.$message.success("老师您好"),localStorage.setItem("identity","1"),localStorage.setItem("tid",e.param.id),localStorage.setItem("isLogin","0"),e.$router.push("/teaDashboard")):(console.log("账号密码错误"),e.$message.error("登录失败"))}))}))},handleReSetPassword:function(){this.passwordVisible=!0},reSetPassword:function(){var e=this,t=/^\w{3,}(\.\w+)*@[A-z0-9]+(\.[A-z]{2,5}){1,2}$/;""===this.form.sid||""===this.form.mail?this.$message.warning("信息不能有空"):t.test(this.form.mail)?Object(o["m"])(this.form).then((function(t){-1===t.data?e.$message.error("用户不存在！"):-2===t.data?e.$message.error("邮箱或学号错误"):0===t.data&&(e.$message.success("重置邮件已发送到您的邮箱，请及时查收"),e.passwordVisible=!1)})):this.$message.error("请输入合法邮箱")}}},l=i,n=(s("f2c1"),s("2877")),c=Object(n["a"])(l,a,r,!1,null,"288ae6ec",null);t["default"]=c.exports},"477b":function(e,t,s){},f2c1:function(e,t,s){"use strict";var a=s("477b"),r=s.n(a);r.a}}]);